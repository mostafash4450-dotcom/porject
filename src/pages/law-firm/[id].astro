---
import MainLayout from '../../layouts/MainLayout.astro';
import { trustedLawFirms, untrustedLawFirms } from '../../data/scamCompanies';

export function getStaticPaths() {
  const trustedPaths = trustedLawFirms.map((firm) => ({
    params: { id: firm.id },
    props: { firm, isTrusted: true },
  }));

  const untrustedPaths = untrustedLawFirms.map((firm) => ({
    params: { id: firm.id },
    props: { firm, isTrusted: false },
  }));

  return [...trustedPaths, ...untrustedPaths];
}

const { id } = Astro.params;
const { firm, isTrusted } = Astro.props;

const title = firm.name;
const description = isTrusted
  ? `معلومات عن مكتب المحاماة ${firm.name}`
  : `تحذير من مكتب المحاماة المشبوه ${firm.name}`;
---

<MainLayout title={title} description={description}>
  <div class="min-h-screen bg-gray-50 py-16 px-4">
    <div class="max-w-4xl mx-auto">
      <div class={`bg-white rounded-lg shadow-lg p-8 ${isTrusted ? 'border-t-4 border-blue-600' : 'border-t-4 border-red-600'}`}>
        <h1 class={`text-4xl font-bold mb-8 ${isTrusted ? 'text-blue-600' : 'text-red-600'}`}>
          {firm.name}
        </h1>

        <div class="grid grid-cols-2 gap-8 mb-8">
          <div>
            <h3 class="text-sm font-semibold text-gray-500 mb-2">الموقع</h3>
            <p class="text-lg">{firm.location}</p>
          </div>
          {isTrusted ? (
            <>
              <div>
                <h3 class="text-sm font-semibold text-gray-500 mb-2">التقييم</h3>
                <div class="flex items-center gap-1">
                  {[...Array(firm.rating)].map(() => (
                    <svg xmlns="http://www.w3.org/2000/svg" stroke-width="2" width="24" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none" viewBox="0 0 24 24" class="w-5 h-5 fill-yellow-400 text-yellow-400">
                      <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                    </svg>
                  ))}
                </div>
              </div>

              <div>
                <h3 class="text-sm font-semibold text-gray-500 mb-2">عدد القضايا المنجزة</h3>
                <p class="text-lg">{firm.casesCompleted.toLocaleString()}</p>
              </div>
            </>
          ) : (
            <div>
              <h3 class="text-sm font-semibold text-gray-500 mb-2">التحذيرات</h3>
              <p class="text-lg text-red-600 font-semibold">{firm.warnings}</p>
            </div>
          )}
        </div>

        {isTrusted ? (
          <div class="bg-blue-50 border-r-4 border-blue-600 p-6 rounded mb-8">
            <h3 class="text-lg font-bold text-blue-900 mb-2">مكتب محاماة موثوق</h3>
            <p class="text-gray-700">
              هذا المكتب معروف بخدماته الموثوقة واسترجاع الأموال بنجاح. لديه سجل حافل من القضايا الناجحة ويتمتع بسمعة جيدة في مجال استرداد أموال الفوركس.
            </p>
          </div>
        ) : (
          <div class="bg-red-50 border-r-4 border-red-600 p-6 rounded mb-8">
            <h3 class="text-lg font-bold text-red-900 mb-2">تحذير هام</h3>
            <p class="text-gray-700">
              هذا المكتب معروف بعمليات احتيال. نحن ننصحك بشدة بعدم التعامل معه. إذا تعاملت معه بالفعل وفقدت أموالاً، يرجى التواصل مع السلطات القانونية المختصة.
            </p>
          </div>
        )}

        <div class="mb-8">
          <h2 class={`text-2xl font-bold mb-4 ${isTrusted ? 'text-blue-900' : 'text-red-900'}`}>
            {isTrusted ? 'نبذة عن المكتب' : 'معلومات التحذير'}
          </h2>
          <p class="text-gray-700 leading-relaxed">
            {isTrusted
              ? `مكتب المحاماة ${firm.name} متخصص في استرجاع أموال المستثمرين المتضررين من شركات التداول النصابة. يتمتع بخبرة واسعة وسجل ناجح في القضايا المختلفة.`
              : `تم تسجيل شكاوى عديدة ضد هذا المكتب من قبل ضحايا الاحتيال. يُرجى الانتباه والحذر الشديد عند التعامل معه أو أي شخص يدعي الانتماء له.`}
          </p>
        </div>

        <div class="flex items-center gap-4">
          <a href="/trusted-law-firms" class={`inline-block px-6 py-3 rounded-lg font-medium transition-colors ${
            isTrusted
              ? 'bg-blue-600 text-white hover:bg-blue-700'
              : 'bg-red-100 text-red-700 hover:bg-red-200'
          }`}>
            {isTrusted ? 'عرض المزيد من مكاتب المحاماة الموثوقة' : 'عرض المزيد من التحذيرات'}
          </a>

          <a href="/" class="inline-flex items-center text-blue-600 hover:text-blue-700 font-medium">
            <svg xmlns="http://www.w3.org/2000/svg" stroke-width="2" width="24" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none" viewBox="0 0 24 24" class="w-5 h-5 ml-2">
              <path d="m12 19-7-7 7-7"></path>
              <path d="M19 12H5"></path>
            </svg>
            العودة للرئيسية
          </a>
        </div>
      </div>
    </div>
  </div>
</MainLayout>
